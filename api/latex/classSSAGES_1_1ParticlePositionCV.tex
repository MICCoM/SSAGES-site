\hypertarget{classSSAGES_1_1ParticlePositionCV}{}\doxysection{S\+S\+A\+G\+ES\+::Particle\+Position\+CV Class Reference}
\label{classSSAGES_1_1ParticlePositionCV}\index{SSAGES::ParticlePositionCV@{SSAGES::ParticlePositionCV}}


Collective variable on an particle position.  




{\ttfamily \#include $<$Particle\+Position\+C\+V.\+h$>$}



Inheritance diagram for S\+S\+A\+G\+ES\+::Particle\+Position\+CV\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=226pt]{classSSAGES_1_1ParticlePositionCV__inherit__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_a39b2186e88bf022a8daacc377ee2c7d4}{Particle\+Position\+CV}} (const \mbox{\hyperlink{namespaceSSAGES_afbb26053e292f94ea83b1c441ce6df74}{Label}} \&atomids, const \mbox{\hyperlink{namespaceSSAGES_a630084a0a5e185e89e21b3735f8f8b2e}{Vector3}} \&position)
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_a5f92c05af7051f6fa156ea4391cfef6e}{Particle\+Position\+CV}} (const \mbox{\hyperlink{namespaceSSAGES_afbb26053e292f94ea83b1c441ce6df74}{Label}} \&atomids, const \mbox{\hyperlink{namespaceSSAGES_a630084a0a5e185e89e21b3735f8f8b2e}{Vector3}} \&position, bool dimx, bool dimy, bool dimz)
\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_a2adbc9cbb13190b92a869087ebefd470}{Initialize}} (const \mbox{\hyperlink{classSSAGES_1_1Snapshot}{Snapshot}} \&snapshot) override
\begin{DoxyCompactList}\small\item\em Initialize necessary variables. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_aa2ee9b7b3ca3133183e2d5f511251e29}{Evaluate}} (const \mbox{\hyperlink{classSSAGES_1_1Snapshot}{Snapshot}} \&snapshot) override
\begin{DoxyCompactList}\small\item\em Evaluate the CV. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV}{Particle\+Position\+CV}} $\ast$ \mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_aba39d6128e00ab299f41c12b46c45b8b}{Build}} (const Json\+::\+Value \&json, const std\+::string \&path)
\begin{DoxyCompactList}\small\item\em Set up collective variable. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classSSAGES_1_1ParticlePositionCV_a0ed0f2bd3d8f6afece8cf84e215da586}\label{classSSAGES_1_1ParticlePositionCV_a0ed0f2bd3d8f6afece8cf84e215da586}} 
\mbox{\hyperlink{namespaceSSAGES_afbb26053e292f94ea83b1c441ce6df74}{Label}} \mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_a0ed0f2bd3d8f6afece8cf84e215da586}{atomids\+\_\+}}
\begin{DoxyCompactList}\small\item\em Vector of atom ids of interest. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classSSAGES_1_1ParticlePositionCV_abf2ac519239a59f30901898b5dbc82e9}\label{classSSAGES_1_1ParticlePositionCV_abf2ac519239a59f30901898b5dbc82e9}} 
\mbox{\hyperlink{namespaceSSAGES_a630084a0a5e185e89e21b3735f8f8b2e}{Vector3}} \mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_abf2ac519239a59f30901898b5dbc82e9}{point\+\_\+}}
\begin{DoxyCompactList}\small\item\em Target point in space. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classSSAGES_1_1ParticlePositionCV_a394f0e74e5750b766282f2e505605fff}\label{classSSAGES_1_1ParticlePositionCV_a394f0e74e5750b766282f2e505605fff}} 
\mbox{\hyperlink{namespaceSSAGES_ab85a44d30d5f2621f266dc52203aacef}{Bool3}} \mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_a394f0e74e5750b766282f2e505605fff}{dim\+\_\+}}
\begin{DoxyCompactList}\small\item\em Each dimension determines if a constraint is applied by the CV. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
Collective variable on an particle position. 

This CV will return the distance of a particle (collection of atoms) from a particular point in (1,2,3)-\/dimensional space. 

Definition at line 39 of file Particle\+Position\+C\+V.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classSSAGES_1_1ParticlePositionCV_a39b2186e88bf022a8daacc377ee2c7d4}\label{classSSAGES_1_1ParticlePositionCV_a39b2186e88bf022a8daacc377ee2c7d4}} 
\index{SSAGES::ParticlePositionCV@{SSAGES::ParticlePositionCV}!ParticlePositionCV@{ParticlePositionCV}}
\index{ParticlePositionCV@{ParticlePositionCV}!SSAGES::ParticlePositionCV@{SSAGES::ParticlePositionCV}}
\doxysubsubsection{\texorpdfstring{ParticlePositionCV()}{ParticlePositionCV()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily S\+S\+A\+G\+E\+S\+::\+Particle\+Position\+C\+V\+::\+Particle\+Position\+CV (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespaceSSAGES_afbb26053e292f94ea83b1c441ce6df74}{Label}} \&}]{atomids,  }\item[{const \mbox{\hyperlink{namespaceSSAGES_a630084a0a5e185e89e21b3735f8f8b2e}{Vector3}} \&}]{position }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Constructor. 


\begin{DoxyParams}{Parameters}
{\em atomids} & Vector of atom ID\textquotesingle{}s. \\
\hline
{\em position} & Point in (1,2,3)D space for the distance calculation.\\
\hline
\end{DoxyParams}
Construct a particle position CV.

\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000004}{Todo}}]Bounds needs to be an input. \end{DoxyRefDesc}


Definition at line 61 of file Particle\+Position\+C\+V.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{61                                                                           :}
\DoxyCodeLine{62         \mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_a0ed0f2bd3d8f6afece8cf84e215da586}{atomids\_}}(atomids), \mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_abf2ac519239a59f30901898b5dbc82e9}{point\_}}(position), \mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_a394f0e74e5750b766282f2e505605fff}{dim\_}}\{\textcolor{keyword}{true}, \textcolor{keyword}{true}, \textcolor{keyword}{true}\}}
\DoxyCodeLine{63         \{}
\DoxyCodeLine{64         \}}

\end{DoxyCode}


Referenced by Build().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classSSAGES_1_1ParticlePositionCV_a39b2186e88bf022a8daacc377ee2c7d4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classSSAGES_1_1ParticlePositionCV_a5f92c05af7051f6fa156ea4391cfef6e}\label{classSSAGES_1_1ParticlePositionCV_a5f92c05af7051f6fa156ea4391cfef6e}} 
\index{SSAGES::ParticlePositionCV@{SSAGES::ParticlePositionCV}!ParticlePositionCV@{ParticlePositionCV}}
\index{ParticlePositionCV@{ParticlePositionCV}!SSAGES::ParticlePositionCV@{SSAGES::ParticlePositionCV}}
\doxysubsubsection{\texorpdfstring{ParticlePositionCV()}{ParticlePositionCV()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily S\+S\+A\+G\+E\+S\+::\+Particle\+Position\+C\+V\+::\+Particle\+Position\+CV (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespaceSSAGES_afbb26053e292f94ea83b1c441ce6df74}{Label}} \&}]{atomids,  }\item[{const \mbox{\hyperlink{namespaceSSAGES_a630084a0a5e185e89e21b3735f8f8b2e}{Vector3}} \&}]{position,  }\item[{bool}]{dimx,  }\item[{bool}]{dimy,  }\item[{bool}]{dimz }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Constructor. 


\begin{DoxyParams}{Parameters}
{\em atomids} & Vector of atom ID\textquotesingle{}s. \\
\hline
{\em position} & Point in (1,2,3)D space for the distance calculation. \\
\hline
{\em dimx} & If {\ttfamily True}, include x dimension. \\
\hline
{\em dimy} & If {\ttfamily True}, include y dimension. \\
\hline
{\em dimz} & If {\ttfamily True}, include z dimension.\\
\hline
\end{DoxyParams}
Construct a particle position CV.

\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000005}{Todo}}]Bounds needs to be an input. \end{DoxyRefDesc}


Definition at line 78 of file Particle\+Position\+C\+V.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{78                                                                                                            :}
\DoxyCodeLine{79         \mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_a0ed0f2bd3d8f6afece8cf84e215da586}{atomids\_}}(atomids), \mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_abf2ac519239a59f30901898b5dbc82e9}{point\_}}(position), \mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_a394f0e74e5750b766282f2e505605fff}{dim\_}}\{dimx, dimy, dimz\}}
\DoxyCodeLine{80         \{}
\DoxyCodeLine{81         \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classSSAGES_1_1ParticlePositionCV_aba39d6128e00ab299f41c12b46c45b8b}\label{classSSAGES_1_1ParticlePositionCV_aba39d6128e00ab299f41c12b46c45b8b}} 
\index{SSAGES::ParticlePositionCV@{SSAGES::ParticlePositionCV}!Build@{Build}}
\index{Build@{Build}!SSAGES::ParticlePositionCV@{SSAGES::ParticlePositionCV}}
\doxysubsubsection{\texorpdfstring{Build()}{Build()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV}{Particle\+Position\+CV}}$\ast$ S\+S\+A\+G\+E\+S\+::\+Particle\+Position\+C\+V\+::\+Build (\begin{DoxyParamCaption}\item[{const Json\+::\+Value \&}]{json,  }\item[{const std\+::string \&}]{path }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Set up collective variable. 


\begin{DoxyParams}{Parameters}
{\em json} & \mbox{\hyperlink{namespaceJSON}{J\+S\+ON}} input value. \\
\hline
{\em path} & Path for \mbox{\hyperlink{namespaceJSON}{J\+S\+ON}} path specification. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointer to the CV built by this function. {\ttfamily nullptr} in case of unknown error.
\end{DoxyReturn}
Builds a CV from a \mbox{\hyperlink{namespaceJSON}{J\+S\+ON}} node. Returns a pointer to the built cv. If an unknown error is encountered, this function will return a {\ttfamily nullptr}, but generally it will throw a \mbox{\hyperlink{classSSAGES_1_1BuildException}{Build\+Exception}} on failure. \begin{DoxyWarning}{Warning}
Object lifetime is the caller\textquotesingle{}s responsibility. 
\end{DoxyWarning}


Definition at line 148 of file Particle\+Position\+C\+V.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{149         \{}
\DoxyCodeLine{150             \mbox{\hyperlink{classJson_1_1ObjectRequirement}{Json::ObjectRequirement}} validator;}
\DoxyCodeLine{151             Json::Value schema;}
\DoxyCodeLine{152             Json::CharReaderBuilder rbuilder;}
\DoxyCodeLine{153             Json::CharReader* reader = rbuilder.newCharReader();}
\DoxyCodeLine{154 }
\DoxyCodeLine{155             reader-\/>parse(JsonSchema::ParticlePositionCV.c\_str(),}
\DoxyCodeLine{156                           JsonSchema::ParticlePositionCV.c\_str() + JsonSchema::ParticlePositionCV.size(),}
\DoxyCodeLine{157                           \&schema, \textcolor{keyword}{nullptr});}
\DoxyCodeLine{158             validator.\mbox{\hyperlink{classJson_1_1ObjectRequirement_a4ed02ae1d612a5efba1688fcdd2df092}{Parse}}(schema, path);}
\DoxyCodeLine{159 }
\DoxyCodeLine{160             \textcolor{comment}{// Validate inputs.}}
\DoxyCodeLine{161             validator.\mbox{\hyperlink{classJson_1_1ObjectRequirement_a9ac3b920001a35bc70580035d8d802b7}{Validate}}(json, path);}
\DoxyCodeLine{162             \textcolor{keywordflow}{if}(validator.\mbox{\hyperlink{classJson_1_1Requirement_adfaec336a9f051d6f6b9a6d7f1d97b75}{HasErrors}}())}
\DoxyCodeLine{163                 \textcolor{keywordflow}{throw} BuildException(validator.\mbox{\hyperlink{classJson_1_1Requirement_a60bc275c366eb59f192fa2e621268480}{GetErrors}}());}
\DoxyCodeLine{164             }
\DoxyCodeLine{165             \mbox{\hyperlink{namespaceSSAGES_afbb26053e292f94ea83b1c441ce6df74}{Label}} atomids;}
\DoxyCodeLine{166             \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\& \textcolor{keywordtype}{id} : json[\textcolor{stringliteral}{"atom\_ids"}])}
\DoxyCodeLine{167                 atomids.push\_back(\textcolor{keywordtype}{id}.asInt());}
\DoxyCodeLine{168             }
\DoxyCodeLine{169             \mbox{\hyperlink{namespaceSSAGES_a630084a0a5e185e89e21b3735f8f8b2e}{Vector3}} position;}
\DoxyCodeLine{170             position[0] = json[\textcolor{stringliteral}{"position"}][0].asDouble();}
\DoxyCodeLine{171             position[1] = json[\textcolor{stringliteral}{"position"}][1].asDouble();}
\DoxyCodeLine{172             position[2] = json[\textcolor{stringliteral}{"position"}][2].asDouble();}
\DoxyCodeLine{173 }
\DoxyCodeLine{174             \mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_a39b2186e88bf022a8daacc377ee2c7d4}{ParticlePositionCV}}* c;}
\DoxyCodeLine{175 }
\DoxyCodeLine{176             \textcolor{keywordflow}{if}(json.isMember(\textcolor{stringliteral}{"dimension"}))}
\DoxyCodeLine{177             \{}
\DoxyCodeLine{178                 \textcolor{keyword}{auto} dimx = json[\textcolor{stringliteral}{"dimension"}][0].asBool();}
\DoxyCodeLine{179                 \textcolor{keyword}{auto} dimy = json[\textcolor{stringliteral}{"dimension"}][1].asBool();}
\DoxyCodeLine{180                 \textcolor{keyword}{auto} dimz = json[\textcolor{stringliteral}{"dimension"}][2].asBool();}
\DoxyCodeLine{181                 c = \textcolor{keyword}{new} \mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_a39b2186e88bf022a8daacc377ee2c7d4}{ParticlePositionCV}}(atomids, position, dimx, dimy, dimz);}
\DoxyCodeLine{182             \}}
\DoxyCodeLine{183             \textcolor{keywordflow}{else}}
\DoxyCodeLine{184                 c = \textcolor{keyword}{new} \mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_a39b2186e88bf022a8daacc377ee2c7d4}{ParticlePositionCV}}(atomids, position);}
\DoxyCodeLine{185 }
\DoxyCodeLine{186             \textcolor{keywordflow}{return} c;}
\DoxyCodeLine{187         \}}

\end{DoxyCode}


References Json\+::\+Requirement\+::\+Get\+Errors(), Json\+::\+Requirement\+::\+Has\+Errors(), Json\+::\+Object\+Requirement\+::\+Parse(), Particle\+Position\+C\+V(), and Json\+::\+Object\+Requirement\+::\+Validate().



Referenced by S\+S\+A\+G\+E\+S\+::\+Collective\+Variable\+::\+Build\+C\+V().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classSSAGES_1_1ParticlePositionCV_aba39d6128e00ab299f41c12b46c45b8b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classSSAGES_1_1ParticlePositionCV_aba39d6128e00ab299f41c12b46c45b8b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classSSAGES_1_1ParticlePositionCV_aa2ee9b7b3ca3133183e2d5f511251e29}\label{classSSAGES_1_1ParticlePositionCV_aa2ee9b7b3ca3133183e2d5f511251e29}} 
\index{SSAGES::ParticlePositionCV@{SSAGES::ParticlePositionCV}!Evaluate@{Evaluate}}
\index{Evaluate@{Evaluate}!SSAGES::ParticlePositionCV@{SSAGES::ParticlePositionCV}}
\doxysubsubsection{\texorpdfstring{Evaluate()}{Evaluate()}}
{\footnotesize\ttfamily void S\+S\+A\+G\+E\+S\+::\+Particle\+Position\+C\+V\+::\+Evaluate (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classSSAGES_1_1Snapshot}{Snapshot}} \&}]{snapshot }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}}



Evaluate the CV. 


\begin{DoxyParams}{Parameters}
{\em snapshot} & Current simulation snapshot. \\
\hline
\end{DoxyParams}


Definition at line 116 of file Particle\+Position\+C\+V.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{117         \{}
\DoxyCodeLine{118             \textcolor{comment}{// Get local atom indices and compute COM. }}
\DoxyCodeLine{119             std::vector<int> idx;}
\DoxyCodeLine{120             snapshot.GetLocalIndices(\mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_a0ed0f2bd3d8f6afece8cf84e215da586}{atomids\_}}, \&idx);}
\DoxyCodeLine{121 }
\DoxyCodeLine{122             \textcolor{comment}{// Get data from snapshot. }}
\DoxyCodeLine{123             \textcolor{keyword}{auto} n = snapshot.GetNumAtoms();}
\DoxyCodeLine{124             \textcolor{keyword}{const} \textcolor{keyword}{auto}\& masses = snapshot.GetMasses();}
\DoxyCodeLine{125 }
\DoxyCodeLine{126             \textcolor{comment}{// Initialize gradient.}}
\DoxyCodeLine{127             std::fill(\mbox{\hyperlink{classSSAGES_1_1CollectiveVariable_a390202f6e541da879f1cfcde22c49489}{grad\_}}.begin(), \mbox{\hyperlink{classSSAGES_1_1CollectiveVariable_a390202f6e541da879f1cfcde22c49489}{grad\_}}.end(), \mbox{\hyperlink{namespaceSSAGES_a630084a0a5e185e89e21b3735f8f8b2e}{Vector3}}\{0,0,0\});}
\DoxyCodeLine{128             \mbox{\hyperlink{classSSAGES_1_1CollectiveVariable_a390202f6e541da879f1cfcde22c49489}{grad\_}}.resize(n, \mbox{\hyperlink{namespaceSSAGES_a630084a0a5e185e89e21b3735f8f8b2e}{Vector3}}\{0,0,0\});}
\DoxyCodeLine{129 }
\DoxyCodeLine{130             \textcolor{comment}{// Compute total and center of mass.}}
\DoxyCodeLine{131             \textcolor{keyword}{auto} masstot = snapshot.TotalMass(idx);}
\DoxyCodeLine{132             \mbox{\hyperlink{namespaceSSAGES_a630084a0a5e185e89e21b3735f8f8b2e}{Vector3}} com = snapshot.CenterOfMass(idx);}
\DoxyCodeLine{133 }
\DoxyCodeLine{134             \textcolor{comment}{// Compute difference between point and account for requested }}
\DoxyCodeLine{135             \textcolor{comment}{// dimensions only.}}
\DoxyCodeLine{136             \mbox{\hyperlink{namespaceSSAGES_a630084a0a5e185e89e21b3735f8f8b2e}{Vector3}} dx = snapshot.ApplyMinimumImage(com -\/ \mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_abf2ac519239a59f30901898b5dbc82e9}{point\_}}).cwiseProduct(\mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_a394f0e74e5750b766282f2e505605fff}{dim\_}}.cast<\textcolor{keywordtype}{double}>());}
\DoxyCodeLine{137             \mbox{\hyperlink{classSSAGES_1_1CollectiveVariable_a65b17f3e9b3c967ad42814c3eec88bb2}{val\_}} = dx.norm();}
\DoxyCodeLine{138 }
\DoxyCodeLine{139             \textcolor{comment}{// If distance is zero, we have nothing to do.}}
\DoxyCodeLine{140             \textcolor{keywordflow}{if}(\mbox{\hyperlink{classSSAGES_1_1CollectiveVariable_a65b17f3e9b3c967ad42814c3eec88bb2}{val\_}} == 0)}
\DoxyCodeLine{141                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{142 }
\DoxyCodeLine{143             \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\& \textcolor{keywordtype}{id} : idx)}
\DoxyCodeLine{144                 \mbox{\hyperlink{classSSAGES_1_1CollectiveVariable_a390202f6e541da879f1cfcde22c49489}{grad\_}}[id] = dx/\mbox{\hyperlink{classSSAGES_1_1CollectiveVariable_a65b17f3e9b3c967ad42814c3eec88bb2}{val\_}}*masses[id]/masstot;}
\DoxyCodeLine{145         \}}

\end{DoxyCode}


References S\+S\+A\+G\+E\+S\+::\+Snapshot\+::\+Apply\+Minimum\+Image(), atomids\+\_\+, S\+S\+A\+G\+E\+S\+::\+Snapshot\+::\+Center\+Of\+Mass(), dim\+\_\+, S\+S\+A\+G\+E\+S\+::\+Snapshot\+::\+Get\+Local\+Indices(), S\+S\+A\+G\+E\+S\+::\+Snapshot\+::\+Get\+Masses(), S\+S\+A\+G\+E\+S\+::\+Snapshot\+::\+Get\+Num\+Atoms(), S\+S\+A\+G\+E\+S\+::\+Collective\+Variable\+::grad\+\_\+, point\+\_\+, S\+S\+A\+G\+E\+S\+::\+Snapshot\+::\+Total\+Mass(), and S\+S\+A\+G\+E\+S\+::\+Collective\+Variable\+::val\+\_\+.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classSSAGES_1_1ParticlePositionCV_aa2ee9b7b3ca3133183e2d5f511251e29_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classSSAGES_1_1ParticlePositionCV_a2adbc9cbb13190b92a869087ebefd470}\label{classSSAGES_1_1ParticlePositionCV_a2adbc9cbb13190b92a869087ebefd470}} 
\index{SSAGES::ParticlePositionCV@{SSAGES::ParticlePositionCV}!Initialize@{Initialize}}
\index{Initialize@{Initialize}!SSAGES::ParticlePositionCV@{SSAGES::ParticlePositionCV}}
\doxysubsubsection{\texorpdfstring{Initialize()}{Initialize()}}
{\footnotesize\ttfamily void S\+S\+A\+G\+E\+S\+::\+Particle\+Position\+C\+V\+::\+Initialize (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classSSAGES_1_1Snapshot}{Snapshot}} \&}]{snapshot }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}}



Initialize necessary variables. 


\begin{DoxyParams}{Parameters}
{\em snapshot} & Current simulation snapshot. \\
\hline
\end{DoxyParams}


Definition at line 87 of file Particle\+Position\+C\+V.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{88         \{}
\DoxyCodeLine{89             \textcolor{keyword}{using} std::to\_string;}
\DoxyCodeLine{90 }
\DoxyCodeLine{91             \textcolor{keyword}{auto} n = \mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_a0ed0f2bd3d8f6afece8cf84e215da586}{atomids\_}}.size();}
\DoxyCodeLine{92 }
\DoxyCodeLine{93             \textcolor{comment}{// Make sure atom ID's are on at least one processor. }}
\DoxyCodeLine{94             std::vector<int> found(n, 0);}
\DoxyCodeLine{95             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t} i = 0; i < n; ++i)}
\DoxyCodeLine{96             \{}
\DoxyCodeLine{97                 \textcolor{keywordflow}{if}(snapshot.GetLocalIndex(\mbox{\hyperlink{classSSAGES_1_1ParticlePositionCV_a0ed0f2bd3d8f6afece8cf84e215da586}{atomids\_}}[i]) != -\/1)}
\DoxyCodeLine{98                     found[i] = 1;}
\DoxyCodeLine{99             \}}
\DoxyCodeLine{100 }
\DoxyCodeLine{101             MPI\_Allreduce(MPI\_IN\_PLACE, found.data(), n, MPI\_INT, MPI\_SUM, snapshot.GetCommunicator());}
\DoxyCodeLine{102             \textcolor{keywordtype}{unsigned} ntot = std::accumulate(found.begin(), found.end(), 0, std::plus<int>());}
\DoxyCodeLine{103             \textcolor{keywordflow}{if}(ntot != n)}
\DoxyCodeLine{104                 \textcolor{keywordflow}{throw} BuildException(\{}
\DoxyCodeLine{105                     \textcolor{stringliteral}{"ParticlePositionCV: Expected to find "} + }
\DoxyCodeLine{106                     to\_string(n) + }
\DoxyCodeLine{107                     \textcolor{stringliteral}{" atoms, but only found "} + }
\DoxyCodeLine{108                     to\_string(ntot) + \textcolor{stringliteral}{"."}}
\DoxyCodeLine{109                 \});         }
\DoxyCodeLine{110         \}}

\end{DoxyCode}


References atomids\+\_\+, S\+S\+A\+G\+E\+S\+::\+Snapshot\+::\+Get\+Communicator(), and S\+S\+A\+G\+E\+S\+::\+Snapshot\+::\+Get\+Local\+Index().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classSSAGES_1_1ParticlePositionCV_a2adbc9cbb13190b92a869087ebefd470_cgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/home/michael/development/\+S\+S\+A\+G\+E\+S/src/\+C\+Vs/Particle\+Position\+C\+V.\+h\end{DoxyCompactItemize}
