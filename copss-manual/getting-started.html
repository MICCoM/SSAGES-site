

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Started &mdash; COPSS-Hydrodynamics 0.4.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Introduction" href="introduction.html" />
    <link rel="prev" title="Welcome to COPSS-Hydrodynamics’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> COPSS-Hydrodynamics
          

          
          </a>

          
            
            
              <div class="version">
                0.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-documentation"><strong>Build documentation</strong></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="how-to-contribute.html">How to Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledgments.html">Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">COPSS-Hydrodynamics</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Getting Started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/getting-started.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<span id="id1"></span><h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p><strong>COPSS</strong> is based on the <a class="reference external" href="http://libmesh.github.io/">LIBMESH</a> framework. It also
requires <a class="reference external" href="https://www.mcs.anl.gov/petsc/index.html">PETSc</a> for parallel linear
equation solvers and <a class="reference external" href="http://slepc.upv.es/">SLEPc</a> for scalable Eigenvalue
computations. In order to achieve the best parallel performance
of COPSS, we strongly suggest you to install the dependent libraries on a Linux cluster environment.
Below are the instructions to install COPSS.</p>
<ol class="arabic simple" start="0">
<li><p>System environment preparation</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://cmake.org/">CMAKE</a> (e.g., but not necessarily, version 3.6.2)</p></li>
<li><p><a class="reference external" href="https://gcc.gnu.org/">GCC</a> (e.g., but not necessarily, version 6.2)</p></li>
<li><p><a class="reference external" href="https://www.python.org/">PYTHON</a> (python 2)</p></li>
<li><p><a class="reference external" href="https://www.open-mpi.org/">OPENMPI</a> (e.g., but not necessarily, version 2.0.1)</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple">
<li><p>Installing PETSc</p></li>
</ol>
<blockquote>
<div><ul>
<li><p>Download PETSC’s latest release ( version 3.7.4 or later ) from <a class="reference external" href="https://www.mcs.anl.gov/petsc/download/index.html">PETSc download page</a>, or git clone PETSc repository and follow
these steps:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">$HOME/projects/</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$HOME/projects/</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">-b</span> <span class="pre">maint</span> <span class="pre">https://bitbucket.org/petsc/petsc</span> <span class="pre">petsc</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Configure PETSc:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$HOME/projects/petsc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">--with-cc=mpicc</span> <span class="pre">--with-cxx=mpicxx</span> <span class="pre">--with-mpiexec=mpiexec</span></code>
<code class="docutils literal notranslate"><span class="pre">--with-fc=mpif90</span> <span class="pre">--download-fblaslapack</span> <span class="pre">--download-scalapack</span> <span class="pre">--download-mumps</span></code>
<code class="docutils literal notranslate"><span class="pre">--download-superlu_dist</span> <span class="pre">--download-hypre</span> <span class="pre">--download-ml</span> <span class="pre">--download-parmetis</span></code>
<code class="docutils literal notranslate"><span class="pre">--download-metis</span> <span class="pre">--download-triangle</span> <span class="pre">--download-chaco</span> <span class="pre">--with-debugging=0</span></code></p></li>
<li><p>And then follow the instructions on screen to install and test the package.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Export environment variables: add the following lines to <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> and
execute <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">~/.bashrc</span></code> before next step. (<code class="docutils literal notranslate"><span class="pre">/path/to/PETSC</span></code> and <code class="docutils literal notranslate"><span class="pre">PETSC_ARCH_NAME</span></code> can be found on the screen after the installation.)</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">PETSC_DIR=/path/to/PETSC</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">PETSC_ARCH=PETSC_ARCH_NAME</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>In case of any trouble, please refer to <a class="reference external" href="https://www.mcs.anl.gov/petsc/documentation/installation.html">PETSC installation</a>.</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Installing SLEPc</p></li>
</ol>
<blockquote>
<div><ul>
<li><p>Download SLEPC’s latest release (version 3.7.3 or later) from <a class="reference external" href="http://slepc.upv.es/download/download.htm">SLEPc download</a>,
or git clone PETSc repository:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$HOME/projects/</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">-b</span> <span class="pre">maint</span> <span class="pre">https://bitbucket.org/slepc/slepc</span> <span class="pre">slepc</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Configure PETSc:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$HOME/projects/slepc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">./configure</span></code></p></li>
<li><p>And then follow the instructions on screen to install the package</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Exporting environment variables: add the following codes to <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> and <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">~/.bashrc</span></code>
before next step. (<code class="docutils literal notranslate"><span class="pre">/path/to/SLEPC</span></code> and <code class="docutils literal notranslate"><span class="pre">SLEPC_ARCH_NAME</span></code> can be found on the screen post installation.)</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">SLEPC_DIR=/path/to/SLEPC</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">SLEPC_ARCH=SLEPC_ARCH_NAME</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Test the package (highly recommended bu not necessary)</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>In case of any trouble, please refer to <a class="reference external" href="http://slepc.upv.es/documentation/instal.html">SLEPC installation</a>.</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Installing LIBMESH</p></li>
</ol>
<blockquote>
<div><ul>
<li><p>Download LIBMESH’s latest release ( version 1.1.0 or later ) from <a class="reference external" href="https://github.com/libMesh/libmesh/releases">LIBMESH download</a>, or git clone PETSc repository:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$HOME/projects/</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">git://github.com/libMesh/libmesh.git</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Build LIBMESH:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$HOME/projects/libmesh</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">-prefix=$HOME/projects/libmesh/libmesh-opt</span> <span class="pre">--enable-optional</span></code>
<code class="docutils literal notranslate"><span class="pre">--enable-vtk</span>&#160; <span class="pre">--enable-gzstream</span> <span class="pre">--enable-trilinos</span> <span class="pre">--disable-strict-lgpl</span></code>
<code class="docutils literal notranslate"><span class="pre">--enable-laspack</span> <span class="pre">--enable-capnproto</span> <span class="pre">--enable-trilinos</span> <span class="pre">--enable-nodeconstraint</span></code>
<code class="docutils literal notranslate"><span class="pre">--enable-perflog</span> <span class="pre">--enable-ifem</span> <span class="pre">--enable-petsc</span> <span class="pre">--enable-blocked-storage</span></code>
<code class="docutils literal notranslate"><span class="pre">--enable-slepc</span> <span class="pre">--enable-unique-id</span> <span class="pre">--enable-unique-ptr</span> <span class="pre">--enable-parmesh</span> <span class="pre">2&gt;&amp;1</span></code>
<code class="docutils literal notranslate"><span class="pre">|</span> <span class="pre">tee</span> <span class="pre">my_config_output_opt.txt</span></code>
(Read the configuration output, make sure <strong>PETSC</strong> and <strong>SLEPC</strong> are enabled).</p></li>
<li><p>And then follow the instructions on screen to install and test the package.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Export environment variables: add the following codes to <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> and <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">~/.bashrc</span></code>
before next step. (<code class="docutils literal notranslate"><span class="pre">/path/to/PETSC</span></code> can be found on the screen after installation.)</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">LIBMESH_DIR=/path/to/LIBMESH</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>If you meet any trouble, please refer to <a class="reference external" href="https://libmesh.github.io/installation.html">LIBMESH installation</a>, or reach out to <strong>LIBMESH</strong> community for help.</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Install COPSS-hydrodynamics</p></li>
</ol>
<blockquote>
<div><ul>
<li><p>Download the latest COPSS codes</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://bitbucket.org/COPSS/copss-hydrodynamics-public.git</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Add the path to COPSS to system environment: add the following code block to <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code>
and source it prior to the next steps.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">COPSS_DIR=&quot;/path/to/copss&quot;</span></code>  (notice: be careful not to include ‘/’ at the end)</p></li>
</ul>
</div></blockquote>
<p>For example, in my system:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">COPSS_DIR=&quot;/scratch/midway2/jyli/bitbucket/MICCOM/copss/copss-hydrodynamics-private&quot;</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Compiling the codes</p>
<blockquote>
<div><ol class="arabic">
<li><p>Manually compile the code by following steps</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$COPSS_DIR/src/</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">package=POINTPARICLE</span></code> (for point particle systems)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">package=RIGIDPARTICLE</span></code> (for rigid particle systems)</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Use auto compilation tool: the compilation tool is located at <code class="docutils literal notranslate"><span class="pre">$COPSS_DIR/tools/compile.sh</span></code>.
To use it, depending on your purpose, execute one of the following commands:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$COPSS_DIR/tools/</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">compile.sh</span> <span class="pre">-h</span></code> (For help)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">compile.sh</span> <span class="pre">-p</span> <span class="pre">POINTPARTICLE</span></code> (Compile PointParticle package)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">compile.sh</span> <span class="pre">-a</span> <span class="pre">clean_first</span> <span class="pre">-p</span> <span class="pre">POINTPARTICLE</span></code> (Compile POINTPARTICLE package after cleaning)</p></li>
</ul>
</div></blockquote>
</li>
<li><p>To run a sedimentation example for rigid particles</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$COPSS_DIR/examples/general_rigid_particle/sedimentation_benchmark/</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">run.sh</span></code></p></li>
</ul>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="build-documentation">
<h2><strong>Build documentation</strong><a class="headerlink" href="#build-documentation" title="Permalink to this headline">¶</a></h2>
<p>After building <strong>COPSS-Hydrodynamics</strong> successfully, you can further build the documentation
in <code class="docutils literal notranslate"><span class="pre">docs/</span></code> directory.</p>
<ol class="arabic">
<li><dl>
<dt>Doxygen</dt><dd><p>The documentation built using <strong>Doxygen</strong> gives the code-level details, including
the code structures, class inheritance, details of functions, etc. To compile the documentation,
make sure [Doxygen](<a class="reference external" href="http://www.stack.nl/~dimitri/doxygen/">http://www.stack.nl/~dimitri/doxygen/</a>) is ready to be used in the system, then:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$COPSS_DIR/docs/doxygen/</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">doxygen</span> <span class="pre">Doxyfile.bak</span></code></p></li>
</ul>
<p>then you can view the documentation in an IE browser:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">google-chrome</span> <span class="pre">[path-to-copss]/docs/doxygen/html/index.html</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Sphinx
The documentation built using <strong>Sphinx</strong> gives the tutorial-level details, including
features of the package, how to run a simulation, how to use a tool, etc. To compile Sphinx,
make sure you have <a class="reference external" href="http://www.sphinx-doc.org/en/master/">Sphinx</a> ready, then:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$COPSS_DIR/docs/sphinx</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code></p></li>
</ul>
</div></blockquote>
<p>then you can view the documentation in an IE browser:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">google-chrome</span> <span class="pre">[path-to-copss]/docs/sphinx/build/html/index.html</span></code></p></li>
</ul>
</div></blockquote>
<p>To modify Sphinx documentation, you need to write the documentation in one of the rst files,
for example, if the documentation is about how to run a simulation, it should be written into:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$COPSS_DIR/docs/sphinx/source/tutorials.rst</span></code></p></li>
</ul>
</div></blockquote>
</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="introduction.html" class="btn btn-neutral float-right" title="Introduction" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to COPSS-Hydrodynamics’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Jiyuan Li; Xikai Jiang; Xujun Zhao

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>